(this.$WP=this.$WP||[]).push(["axg15s",(e,r)=>{var a,t,i,n,c,d,s,l,o,h,m,f,g,p,v,b,u,_,P,y,x,D,T,N,C,L,I,k,S,E,M,A,H={hoverStateTrail:"gsZFw Fl",hoverPopoverContainer:"KtuQX _s",hoverThermometer:"jEbkJ",hoverDataContainer:"XITDE e",yAxis:"emcOn",yAxisLegends:"qDpWU Fl e",yAxisLegendItem:"FCkMo e",yAxisThermometer:"mHjRP Fl",topChartContainerPlaceHolder:"IHtcM",chartContainer:"amQUi",chartContent:"tfDJh",horizontalGrid:"OKRgF e",horizontalLine:"onVNY",barsContent:"xpPGI",barContainer:"AECrH o",monthDivider:"RtLRE",monthBreak:"beMRV q",verticalLine:"bAsAk",hoverLineContainer:"yevnc",hoverLine:"GIJtg",bar:"yprzz",enableCursorHover:"kYkPd",in:"pjUkX",out:"WbHmF",xAxisLegends:"QqDkp",xAxisLegendItem:"NNiDJ c e",xAxisLegendItemText:"zcYsU",xAxisTickMark:"RvtWn",tickMarkMarginRight:"dsjyx",tickMarkMarginLeft:"elGiF",chartFooterLegend:"dZgNm Fl",disclaimer:"mGNRM",footerLegendContainer:"HfykW",footerLegend:"ZwXlE",legendIcon:"GFWFf",sliderPaginatorContainer:"vLWfx Fl e",sliderPaginatorText:"EOzVn",bgGreen:"IpBgQ",bgYellow:"gfjJy",bgRed:"EwUyc",chartMainContainer:"WRxAq",justifyCenter:"kjFKg"},w=(e,r,a)=>0===e?0:e===a?98:(e-r)/(a-r)*80+18,R=(e,r,a)=>e<=r?"CHEAP":e>=a?"HIGH":"AVERAGE",z=(e,r,a,t,i,n)=>a<=1?0:a>n-6&&a<=n-1?e-r:t-4*i,F=({data:e,readonly:r,onDatesSelected:c,priceDisclaimerText:o,defaultCheckIn:m})=>{var{localize:f}=d(),b=s(),x=l(),{userAgentCategory:T}=D(),N=h(),{page:C}=g(),{geoId:k,detailId:S}=v(0),E="MOBILE"===x,M="TABLET"===T,[A,F]=u(0),[O,V]=u(e.allPriceDates[0]),[U,$]=u(0),[J,Q]=u("start"),[Z,ee]=u(!0),[er,ea]=u(0),[et,ei]=u(!1),[en,ec]=u(!1),ed=_(null),es=_(null),el=_(null),eo=I({in:Z,timeout:300}),eh=p(),em=eh.hotels?.defaultDates===!1,[ef,eg]=[e.allPriceDates.slice(0,e.allPriceDates.length/2),e.allPriceDates.slice(e.allPriceDates.length/2)],[ep,ev]=u(E?ef:e.allPriceDates);P(()=>{ev(E?e.allPriceDates.slice(0,e.allPriceDates.length/2):e.allPriceDates)},[E,e.allPriceDates]),P(()=>{et||en||(F(0),V(ep[0]),$(0),Q("start"))},[et,en,ep]);var eb=(r,a,t)=>{F(a),V(t),$(z(es.current?.clientWidth||0,el.current?.scrollWidth||0,a,r.currentTarget.offsetLeft,r.currentTarget.offsetWidth,e.allPriceDates.length)),a>=ep.length-6?Q("end"):a>3&&a<ep.length-6?Q("center"):Q("start")},eu=()=>{if(E||M||r)return null;var e=n.for(O.date),a=e.dayAfter();return c(e,a,O.price)},e_=e=>(F(0),$(0),Q("start"),ee(!0),"right"===e)?(ev(ef),V(ef[0]),0):(ev(eg),V(eg[0]),1),eP=()=>ea(()=>e_("right")),ey=()=>ea(()=>e_("left")),ex=y({onSwipedRight:eP,onSwipedLeft:ey,onSwipeStart:e=>{("Left"===e.dir||"Right"===e.dir)&&ee(!1)},onSwiped:e=>{("Left"===e.dir||"Right"===e.dir)&&N({actionType:"scroll",team:"Hotels",actionSubType:"PriceTrendsChart",itemName:`swiped${e.dir}`,page:C,geoId:k,locationId:S})}});return a(t,{children:[i(X,{readonly:r,hoverStateTrailRef:es,hoverPopoverRef:el,hoverPriceDate:O,leftPosition:E?0:U,mobilePosition:E?J:"start",lowPriceThreshold:e.lowPriceThreshold,highPriceThreshold:e.highPriceThreshold,onDatesSelected:c,setMouseInPopover:ei,userEnteredDates:em,defaultCheckIn:m}),a("div",{onMouseLeave:()=>{ec(!1)},onMouseEnter:()=>{ec(!0)},ref:ed,className:H.chartMainContainer,children:[i("div",{className:H.topChartContainerPlaceHolder}),a("div",{className:H.chartContainer,...ex,children:[i(G,{minPrice:e.minPrice,maxPrice:e.maxPrice}),a("div",{className:H.chartContent,children:[i(W,{}),i("div",{className:H.barsContent,children:ep.map((t,c)=>{var d=n.for(O.date),s=d.dayAfter(),l=f.string("En moyenne {sPrice}/nuit, du {nDayStart}/{nMonthStart} au {nDayEnd}/{nMonthEnd}","hsx_avg_price_on_date_range_fix",{sPrice:b.formatCurrencyInteger(t.price),nMonthStart:d.month,nDayStart:d.day,nMonthEnd:s.month,nDayEnd:s.day}),o=`${l} - ${f.string("Sélectionner la date","HSX_select_date")}`;return a("div",{className:H.barContainer,onMouseEnter:e=>eb(e,c,t),children:[t.hasMonthDivider&&i(j,{priceDate:t}),A===c&&i(q,{}),i("div",{className:L(H.bar,{[H.in]:"entering"===eo||"entered"===eo,[H.out]:"exit"===eo||"exiting"===eo||"exited"===eo,[H.bgGreen]:"CHEAP"===R(t.price,e.lowPriceThreshold,e.highPriceThreshold)&&c===A,[H.bgYellow]:"AVERAGE"===R(t.price,e.lowPriceThreshold,e.highPriceThreshold)&&c===A,[H.bgRed]:"HIGH"===R(t.price,e.lowPriceThreshold,e.highPriceThreshold)&&c===A,[H.enableCursorHover]:!r}),style:{height:`${w(t.price,e.minPrice,e.maxPrice)}%`},onClick:eu,onKeyUp:e=>{"Enter"===e.code||"Space"===e.code&&t.price>0?eu():"Tab"===e.code&&t.price>0&&eb(e,c,t)},role:"button","aria-label":o,tabIndex:0})]},`PriceTrendsBar-${t.date}`)})}),i(B,{allPriceDates:ep})]})]})]}),E&&i(Y,{otherPageNumberOfDays:(0===er?eg:ef).length,selectedIndex:er,onSwipedLeft:ey,onSwipedRight:eP}),i(K,{isDesktop:"DESKTOP"===x,priceDisclaimerText:o})]})},X=({readonly:e,hoverStateTrailRef:r,hoverPopoverRef:t,leftPosition:l,mobilePosition:o,hoverPriceDate:h,lowPriceThreshold:m,highPriceThreshold:f,onDatesSelected:g,setMouseInPopover:p,userEnteredDates:v,defaultCheckIn:b})=>{var u=s(),{localize:_}=d(),P=n.for(h.date),y=P.dayAfter(),D=i(c,{variant:"title-05",color:"primaryText",elementType:"span",children:u.formatCurrencyInteger(h.price)});return i("div",{className:H.hoverStateTrail,style:{justifyContent:o},ref:r,children:a("div",{className:H.hoverPopoverContainer,ref:t,style:{left:l},onMouseLeave:()=>{p(!1)},onMouseEnter:()=>{p(!0)},children:[i("div",{className:L(H.hoverThermometer,{[H.bgGreen]:"CHEAP"===R(h.price,m,f),[H.bgYellow]:"AVERAGE"===R(h.price,m,f),[H.bgRed]:"HIGH"===R(h.price,m,f)})}),a("div",{className:H.hoverDataContainer,children:[i(c,{variant:"input-03",color:"primaryText",children:_("En moyenne {sPrice}/nuit, du {nDayStart}/{nMonthStart} au {nDayEnd}/{nMonthEnd}","hsx_avg_price_on_date_range_fix",{sPrice:D,nMonthStart:P.month+1,nDayStart:P.day,nMonthEnd:y.month+1,nDayEnd:y.day})}),!e&&!h.isCheckIn&&!(!v&&P===b)&&i(x,{variant:"primary",onClick:()=>g(P,y,h.price),children:_("Sélectionner la date","HSX_select_date")})]})]})})},G=({minPrice:e,maxPrice:r})=>a("div",{className:H.yAxis,children:[a("div",{className:H.yAxisLegends,children:[i(O,{price:r}),i(O,{price:e+(r-e)/2}),i(O,{price:e})]}),i("div",{className:H.yAxisThermometer})]}),O=({price:e})=>{var r=s(),{localize:t}=d(),n=l();return a("div",{className:H.yAxisLegendItem,children:[i(c,{variant:"supporting-01",color:"secondaryText",children:r.formatCurrencyInteger(e)}),"DESKTOP"===n&&i(c,{variant:"supporting-02",color:"secondaryText",children:t("par nuit","base_daily_price_per_night")})]})},W=()=>a("div",{className:H.horizontalGrid,children:[i("div",{className:H.horizontalLine}),i("div",{className:H.horizontalLine}),i("div",{className:H.horizontalLine}),i("div",{className:H.horizontalLine}),i("div",{className:H.horizontalLine}),i("div",{className:H.horizontalLine})]}),j=({priceDate:e})=>{var r=s();return a("div",{className:H.monthDivider,children:[i("div",{className:H.monthBreak,children:i(c,{variant:"supporting-04",color:"placeholderText",children:r.formatDate("month_short",n.for(e.date).addMonths(-1).date)})}),i("hr",{className:H.verticalLine}),i("div",{className:H.monthBreak,children:i(c,{variant:"supporting-04",color:"placeholderText",children:r.formatDate("month_short",n.for(e.date).date)})})]})},q=()=>i("div",{className:H.hoverLineContainer,children:i("hr",{className:H.hoverLine})}),B=({allPriceDates:e})=>{var r=s(),{localize:t}=d(),o=l(),h="MOBILE"===o,m=parseInt(String(e.length/2),10),f=e.length-1,g=(e,r)=>e?0===r||r===m||r===f:"TABLET"===o?r%3==0:r%2==0;return i("div",{className:H.xAxisLegends,children:e.map((e,d)=>{var s=r.formatDate("date_medium_month",n.for(e.date).date);return g(h,d)&&a("div",{className:H.xAxisLegendItem,children:[i("hr",{className:L(H.xAxisTickMark,{[H.tickMarkMarginRight]:h&&0===d,[H.tickMarkMarginLeft]:h&&d===f})}),a("div",{className:H.xAxisLegendItemText,children:[i(c,{variant:"supporting-02",children:e.isCheckIn||e.isToday?i("b",{children:s}):s}),(e.isToday||e.isCheckIn)&&i("div",{className:H.justifyCenter,children:i(c,{whiteSpace:"nowrap",variant:"supporting-02",children:i("b",{children:e.isCheckIn?t("Arrivée","meta_check_in_c2b"):t("Aujourd'hui","HSX_today")})})})]})]},`PriceTrendsXAxis-${e.date}`)})})},K=({isDesktop:e,priceDisclaimerText:r})=>{var{localize:t}=d();return a("div",{className:H.chartFooterLegend,children:[e&&i("div",{className:H.disclaimer,children:i(f,{priceDisclaimer:r,variant:"supporting-01"})}),a("div",{className:H.footerLegendContainer,children:[a("div",{className:H.footerLegend,children:[i("div",{className:L(H.legendIcon,H.bgGreen)}),i(c,{variant:"supporting-02",children:t("Moins cher","hotels_price_heatmap_cheaper")})]}),a("div",{className:H.footerLegend,children:[i("div",{className:L(H.legendIcon,H.bgYellow)}),i(c,{variant:"supporting-02",children:t("Moyen","hotels_price_heatmap_average")})]}),a("div",{className:H.footerLegend,children:[i("div",{className:L(H.legendIcon,H.bgRed)}),i(c,{variant:"supporting-02",children:t("Plus cher","hotels_price_heatmap_higher")})]})]})]})},Y=({selectedIndex:e,otherPageNumberOfDays:r,onSwipedRight:t,onSwipedLeft:n})=>{var{localize:s}=d();return a("div",{className:H.sliderPaginatorContainer,children:[i(T,{numberOfItems:2,selectedIndex:e}),a("button",{type:"button",className:H.sliderPaginatorText,onClick:0===e?n:t,children:[1===e&&i(N,{}),a(c,{variant:"supporting-02",children:[0===e&&s("{numDays} prochains jours","HSX_next_x_days",{numDays:r}),1===e&&s("{numDays} derniers jours","HSX_last_x_days",{numDays:r})]}),0===e&&i(C,{})]})]})},V=(e,r)=>a=>{var{keyCode:t}=a;switch(t){case M:r(!1);break;case E:r(!0);break;case S:case k:r(!e)}},U=({title:e,open:r=!1,onClick:t})=>a("button",{type:"button",className:L("zMbwy Fh u",{nWtDa:r}),onClick:e=>{e.preventDefault(),e.stopPropagation(),t()},onKeyDown:V(r,t),children:[e,i("div",{className:L("SfkuT _S Cl",{IbQZD:r}),children:i(A,{size:20})})]}),$=({title:e,children:r,open:t=!1,onChange:n})=>a("div",{role:"group",className:"woOHq _c",children:[i(U,{title:e,open:t,onClick:()=>n(!t)}),i("div",{className:L({VqALy:!t}),children:r})]}),J={title:"RsWTk Fl f k",textContainer:"ZxkII f e",disclaimer:"dguIv e f Pj"},Q=({dataSize:e,price:r,lowPriceThreshold:t,highPriceThreshold:n,isMobile:s})=>{var{localize:l}=d(),o=R(r,t,n);return i("div",{className:J.title,children:a("div",{className:J.textContainer,children:[i(c,{variant:s?"title-04":"title-03",children:l("Tendances des prix au cours des {numDays} prochains jours","HSX_price_trends_in_the_next_x_days",{numDays:e})}),i(c,{variant:s?"supporting-01":"body-01",children:l("Les prix durant votre séjour sont actuellement {sType, select, LOW {faibles} HIGH {élevés} other {moyens}}.","hsx_price_trend_current",{sType:"CHEAP"===o?"LOW":o})})]})})},Z=({data:e,avgPrice:r,onChange:t,readonly:c=!1,onDatesSelected:s,checkInDate:u,isOpenDropdown:_})=>{var P=l(),y="MOBILE"===P,x=m(),D=h(),{page:T}=g(),{geoId:N,detailId:C}=v(0),{localize:L}=d(),I=L.string("Reflète les prix moyens par nuit constatés récemment par nos partenaires, et n'inclut pas toujours les taxes ou frais estimés. Le prix affiché lors du paiement peut varier.","HSX_price_trends_default_disclaimer"),k=p(),S=k.hotels?.defaultDates===!1,E=n.today().date;E.setDate(E.getDate()-E.getDay()+7),E.setDate(E.getDate()-E.getDay()+7);var M=n.for(E),A=ee(e,r,u),H=A?.allPriceDates.find(e=>e.date===M.ymd),w=S?A?.allPriceDates[0].price:H?.price,R=b(()=>{x({itemType:"page",itemName:"PriceTrendsModal",team:"Hotels",page:T,geoId:N,locationId:C,customData:{minPrice:A?.minPrice,maxPrice:A?.maxPrice}})}),z=A?.allPriceDates?A.allPriceDates.length-1:0,X=A&&a("div",{ref:R,children:[i(F,{data:A,readonly:c,onDatesSelected:(e,r,a)=>{var t=(t,i)=>{D({actionType:"click",team:"Hotels",actionSubType:t,itemName:i,page:T,geoId:N,locationId:C,customData:{checkIn:e.toISOString(),checkOut:r.toISOString(),priceSelected:a,origin:"PriceTrendsModal"}})};t(o.setDateRange,"dateRange"),t(o.setDates,"checkIn"),s(e,r)},priceDisclaimerText:I,defaultCheckIn:M}),(y||"TABLET"===P)&&i("div",{className:J.disclaimer,children:i(f,{priceDisclaimer:I,variant:y?"supporting-02":"supporting-01",color:y?"secondaryText":"placeholderText"})})]});return z>0&&i($,{title:i(Q,{dataSize:z,price:w??r,lowPriceThreshold:A?.lowPriceThreshold||0,highPriceThreshold:A?.highPriceThreshold||0,isMobile:y}),open:_,onChange:t,children:X})},ee=(e,r,a)=>{if(!e||0===e.length||!e[0]?.allPriceDates||e[0]?.allPriceDates?.length===0)return null;for(var t=e.flatMap(e=>e?e.allPriceDates:[]),i=n.for(t[0]?.date||n.today()),c=[],d=0;d<=30;)!function(){var e=i.addDays(d),s=t.find(r=>!!r?.date&&n.for(r.date).sameDay(e));c.push({date:s?.date||e.ymd,price:s?.price||r,isToday:e.sameDay(n.today()),isCheckIn:!!a&&e.sameDay(n.for(a)),hasMonthDivider:1===e.date.getDate()}),d++}();var s=Math.max(...e.map(e=>e&&e.highPriceThreshold?e.highPriceThreshold:0)),l=Math.max(...e.map(e=>e&&e.maxPrice?e.maxPrice:0));return{allPriceDates:c,highPriceThreshold:s,lowPriceThreshold:Math.min(...e.map(e=>e&&e.lowPriceThreshold?e.lowPriceThreshold:0)),maxPrice:l,minPrice:Math.min(...e.map(e=>e&&e.minPrice?e.minPrice:0))}};return[()=>{e("default",Z)},[e=>(a=e.jsxs,t=e.Fragment,i=e.jsx),e=>n=e.default,e=>c=e.default,e=>(d=e.useLocalize,s=e.useIntlFormatter),e=>l=e.useViewportCategory,e=>o=e.TrackingSubType,e=>(h=e.useHotelInteractionLogger,m=e.useHotelImpressionLogger),e=>f=e.PriceDisclaimer,e=>g=e.useRoute,e=>p=e.useTravelInfo,e=>v=e.useLocationId,e=>b=e.useOnVisible,e=>(u=e.useState,_=e.useRef,P=e.useEffect),e=>y=e.useSwipeable,e=>x=e.BorderlessButton,e=>D=e.useUserAgent,e=>T=e.default,e=>N=e.default,e=>C=e.default,e=>L=e.default,e=>I=e.default,e=>(k=e.KEY_ENTER,S=e.KEY_SPACE,E=e.KEY_DOWN,M=e.KEY_UP),e=>A=e.default]]},["21h32l","fgi73t","essqvy","7thqz4","ys6v1o","h1hqsi","ctn2v9","hdzvbi","fgwvq1","etaac9","2tnrli","3btuy0","o4yt4q","9w33la","jppfwt","nnprhg","d0lmv3","a6i9w3","6qmqhw","fkji80","sdpjgr","conwso","i0z8n1"]]);
